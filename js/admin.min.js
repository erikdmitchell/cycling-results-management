function showLoader(e){var a=jQuery("<div/>",{class:"loader-image-container"}).appendTo(e).show();jQuery("<img/>",{src:"/wp-admin/images/wpspin_light-2x.gif",class:"loader-image"}).appendTo(a)}function hideLoader(){jQuery(".loader-image-container").remove()}jQuery(document).ready(function(s){var t=s(".loading-modal");s("#season").change(function(){var e=s("#season option:selected").data("url");s("#url").val(e)}),s("#select-all").live("click",function(e){e.preventDefault(),s(this).hasClass("unselect")?(s(this).removeClass("unselect"),s(".check-column > input").each(function(){this.checked=!1})):(s(this).addClass("unselect"),s(".check-column > input").each(function(){s(this).is(":disabled")||(this.checked=!0)}))}),s("#get-races-curl").click(function(e){t.show(),s("#get-race-data").html(""),e.preventDefault();var a={action:"get_race_data_non_db",form:s("form.get-races").serialize()};s.post(ajaxurl,a,function(e){s("#get-race-data").html(e),t.hide()})}),s("#add-races-curl-to-db").live("click",function(e){e.preventDefault();var a=[];s(".url-dd#season option:selected").text();s("#add-races-to-db input:checked").each(function(){"selectall"!=s(this).attr("id")&&a.push(s(this).val())});var t={action:"prepare_add_races_to_db",races:a};s.post(ajaxurl,t,function(e){s("#get-race-data").html("");var a=s.parseJSON(e),t=0;for(var n in s("#get-race-data").append('<div id="counter"><span class="ctr">'+t+"</span> out of "+a.length+" proccessed."),a){var c={action:"add_race_to_db",race:a[n]};s.post(ajaxurl,c,function(e){if(t++,s("#get-race-data").append(e),s("#get-race-data").find("#counter span.ctr").text(t),t>=a.length){s("#get-race-data").find("#counter span.ctr").text(t);return s("#get-race-data").append('<div class="note">Calculating rider rankings...</div>'),s("#get-race-data").append('<div class="note">You need to do this on the other page for now.</div>'),!1}})}})}),s("#search-related-races").live("keyup",function(e){var a=s(this).val();return""!==a&&3<=a.length&&s.ajax({type:"post",url:ajaxurl,data:{action:"search_related_races",query:a,race_id:s("#main_race_id").val()},success:function(e){s("#related-races-search-results").html(e)}}),!1}),s(".uci-results-series a.delete").click(function(e){e.preventDefault();var a={action:"delete_series",series_id:s(this).data("id")};s.post(ajaxurl,a,function(e){location.reload()})}),s("#build-season-weeks").click(function(e){showLoader("#wpcontent");s.post(ajaxurl,{action:"uci_results_build_season_weeks"},function(e){hideLoader(),s("#uci-results-actions-message").append(e)})}),s("#uci-results-empty-db").click(function(e){var a={action:"uci_results_empty_db",security:s("#uci-results-empty-db-nonce").val()};s.post(ajaxurl,a,function(e){s("#uci-results-actions-message").append(e)})}),s("#uci-results-remove-db").click(function(e){var a={action:"uci_results_remove_db",security:s("#uci-results-remove-db-nonce").val()};s.post(ajaxurl,a,function(e){s("#uci-results-actions-message").append(e)})}),s("#rankings-filter #season").change(function(e){showLoader("#wpcontent"),e.preventDefault();var a={action:"uci_results_rider_rankings_dropdown",season:s(this).val()};s.post(ajaxurl,a,function(e){s("#rankings-filter #week").html(e),s("table.riders").html(""),hideLoader()})}),s("#uci-results-clear-log").click(function(e){showLoader("#wpcontent"),e.preventDefault();s.post(ajaxurl,{action:"uci_results_clear_cron_log"},function(e){s("#uci-results-cron-job-log-size").text("n/a"),hideLoader()})})});